<div class="modal-overlay" (click)="close.emit()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Novo Ponto Manual</h3>
      <button class="btn-close" (click)="close.emit()">
        <lucide-icon name="x" [size]="20"></lucide-icon>
      </button>
    </div>

    <div class="modal-body">
      <!-- Funcion치rio -->
      <div class="form-group">
        <label for="employeeSelect">Funcion치rio</label>
        <div class="search-box">
          <lucide-icon name="search" [size]="16"></lucide-icon>
          <input 
            type="text" 
            class="input-text" 
            placeholder="Pesquisar funcion치rio..." 
            [(ngModel)]="searchQuery"
          />
        </div>
        <select 
          id="employeeSelect" 
          class="input-select" 
          [(ngModel)]="selectedMatricula"
          size="5"
        >
          @for (emp of filteredEmployees(); track emp.id) {
            <option [value]="emp.matricula">
              {{ emp.nome }} ({{ emp.matricula }}) - {{ emp.empresa }}
            </option>
          } @empty {
            <option disabled>Nenhum funcion치rio encontrado.</option>
          }
        </select>
      </div>

      <div style="display: flex; gap: 1rem;">
        <!-- Data -->
        <div class="form-group" style="flex: 1;">
          <label for="pontoData">Data</label>
          <input 
            type="date" 
            id="pontoData" 
            class="input-text" 
            [(ngModel)]="selectedDate"
          />
        </div>

        <!-- Hora -->
        <div class="form-group" style="flex: 1;">
          <label for="pontoHora">Hora</label>
          <input 
            type="time" 
            id="pontoHora" 
            class="input-text" 
            [(ngModel)]="selectedTime"
          />
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn btn-outline" (click)="close.emit()">Cancelar</button>
      <button 
        class="btn btn-primary" 
        (click)="salvar()" 
        [disabled]="isSaving() || !isFormValid()"
      >
        @if (isSaving()) {
          <div class="btn-spinner"></div>
        } @else {
          <lucide-icon name="save" [size]="18"></lucide-icon>
        }
        Salvar Ponto
      </button>
    </div>
  </div>
</div>
